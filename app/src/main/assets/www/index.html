<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>StudyX è®°å¿†å¼•æ“ - å°å¿†AIå­¦ä¹ åŠ©æ‰‹</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ===== éª¨æ¶å±æ ·å¼ ===== */
        .skeleton-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #0f172a;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
            transition: opacity 0.3s ease;
        }
        .skeleton-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .skeleton-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        .skeleton-logo {
            width: 120px;
            height: 32px;
            background: linear-gradient(90deg, #1e293b 25%, #334155 50%, #1e293b 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: 6px;
        }
        .skeleton-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(90deg, #1e293b 25%, #334155 50%, #1e293b 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
        }
        .skeleton-card {
            background: linear-gradient(90deg, #1e293b 25%, #334155 50%, #1e293b 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: 12px;
            margin-bottom: 16px;
        }
        .skeleton-card.large {
            height: 140px;
        }
        .skeleton-card.medium {
            height: 80px;
        }
        .skeleton-card.small {
            height: 56px;
        }
        .skeleton-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }
        .skeleton-grid-item {
            height: 100px;
            background: linear-gradient(90deg, #1e293b 25%, #334155 50%, #1e293b 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: 12px;
        }
        .skeleton-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: #1e293b;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 20px;
        }
        .skeleton-nav-item {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: linear-gradient(90deg, #334155 25%, #475569 50%, #334155 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
        }
        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        .skeleton-loading-text {
            text-align: center;
            color: #64748b;
            font-size: 14px;
            margin-top: 40px;
        }
    </style>
</head>
<body>
    <!-- éª¨æ¶å± -->
    <div id="skeleton-screen" class="skeleton-screen">
        <div class="skeleton-header">
            <div class="skeleton-logo"></div>
            <div class="skeleton-avatar"></div>
        </div>
        <div class="skeleton-card large"></div>
        <div class="skeleton-grid">
            <div class="skeleton-grid-item"></div>
            <div class="skeleton-grid-item"></div>
            <div class="skeleton-grid-item"></div>
            <div class="skeleton-grid-item"></div>
        </div>
        <div class="skeleton-card medium"></div>
        <div class="skeleton-card small"></div>
        <div class="skeleton-nav">
            <div class="skeleton-nav-item"></div>
            <div class="skeleton-nav-item"></div>
            <div class="skeleton-nav-item"></div>
            <div class="skeleton-nav-item"></div>
            <div class="skeleton-nav-item"></div>
        </div>
        <div class="skeleton-loading-text">æ­£åœ¨åŠ è½½å­¦ä¹ å†…å®¹...</div>
    </div>
    <div id="app">
        <!-- ä¾§è¾¹å¯¼èˆª -->
        <nav class="sidebar">
            <div class="logo">
                <span class="logo-icon">ğŸ¯</span>
                <span class="logo-text">StudyX</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-page="today">
                    <span class="nav-icon">ğŸ“…</span>
                    <span class="nav-text">ä»Šæ—¥ä»»åŠ¡</span>
                </li>
                <li class="nav-item" data-page="econlaw">
                    <span class="nav-icon">âš–ï¸</span>
                    <span class="nav-text">ç»æµæ³•å­¦</span>
                </li>
                <li class="nav-item" data-page="vocabulary">
                    <span class="nav-icon">ğŸ”¤</span>
                    <span class="nav-text">è‹±è¯­å•è¯</span>
                    <span class="badge" id="vocab-badge">--</span>
                </li>
                <li class="nav-item" data-page="quiz">
                    <span class="nav-icon">ğŸ²</span>
                    <span class="nav-text">è®°å¿†æŠ½æµ‹</span>
                    <span class="badge" id="quiz-badge">5</span>
                </li>
                <li class="nav-item" data-page="review">
                    <span class="nav-icon">ğŸ”„</span>
                    <span class="nav-text">å¤ä¹ ä¸­å¿ƒ</span>
                    <span class="badge" id="review-badge">3</span>
                </li>
                <li class="nav-item" data-page="stats">
                    <span class="nav-icon">ğŸ“Š</span>
                    <span class="nav-text">å­¦ä¹ æ•°æ®</span>
                </li>
                <li class="nav-item" data-page="schedule">
                    <span class="nav-icon">ğŸ“‹</span>
                    <span class="nav-text">å­¦ä¹ è®¡åˆ’</span>
                </li>
                <li class="nav-item" data-page="videos">
                    <span class="nav-icon">ğŸ¬</span>
                    <span class="nav-text">è§†é¢‘è¯¾ç¨‹</span>
                    <span class="badge" id="video-badge">--</span>
                </li>
                <li class="nav-item" data-page="daily">
                    <span class="nav-icon">ğŸ“</span>
                    <span class="nav-text">å­¦ä¹ æ—¥æŠ¥</span>
                </li>
                <li class="nav-item" data-page="reports">
                    <span class="nav-icon">ğŸ“ˆ</span>
                    <span class="nav-text">å‘¨æŠ¥æœˆæŠ¥</span>
                </li>
            </ul>
            
            <!-- å¤‡ä»½æ•°æ®æŒ‰é’®ï¼ˆæ”¾åœ¨èœå•å¤–é¿å…äº‹ä»¶å†²çªï¼‰-->
            <div class="nav-backup-wrapper">
                <button class="nav-backup-btn" onclick="if(window.backupRestoreUI){backupRestoreUI.showModal()}else{alert('å¤‡ä»½æ¨¡å—æœªåŠ è½½ï¼Œè¯·åˆ·æ–°é¡µé¢')}"
                        title="å¤‡ä»½æˆ–æ¢å¤å­¦ä¹ æ•°æ®">
                    <span class="nav-icon">ğŸ’¾</span>
                    <span class="nav-text">æ•°æ®å¤‡ä»½</span>
                </button>
            </div>
            <div class="sidebar-footer">
                <button class="backup-btn" onclick="if(window.backupRestoreUI){backupRestoreUI.showModal()}else{alert('å¤‡ä»½æ¨¡å—æœªåŠ è½½ï¼Œè¯·åˆ·æ–°é¡µé¢')}" title="å¤‡ä»½æˆ–æ¢å¤å­¦ä¹ æ•°æ®">
                    <span class="backup-icon">ğŸ’¾</span>
                    <span class="backup-text">å¤‡ä»½æ•°æ®</span>
                </button>
                <button class="backup-btn email-btn" onclick="if(window.emailBackup){emailBackup.showExportModal()}else{alert('é‚®ç®±å¤‡ä»½æ¨¡å—æœªåŠ è½½')}" title="å¯¼å‡ºåˆ°é‚®ç®±" style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%); margin-top: 8px;">
                    <span class="backup-icon">ğŸ“§</span>
                    <span class="backup-text">å¯¼å‡ºåˆ°é‚®ç®±</span>
                </button>
                <div class="exam-countdown" onclick="app.showExamDateModal()" title="ç‚¹å‡»è®¾ç½®è€ƒè¯•æ—¥æœŸ">
                    <span class="countdown-label">è·ç¦»è€ƒè¯•</span>
                    <span class="countdown-days" id="exam-countdown">--</span>
                    <span class="countdown-unit">å¤©</span>
                    <span class="countdown-edit">âœï¸</span>
                </div>
            </div>
        </nav>

        <!-- æ‰‹æœºç«¯ä¸“ç”¨åº•éƒ¨å¯¼èˆª-->
        <nav class="mobile-nav" style="display: none;">
            <div class="mobile-nav-item active" data-page="today">
                <span class="nav-icon">ğŸ“…</span>
                <span>é¦–é¡µ</span>
            </div>
            <div class="mobile-nav-item" data-page="econlaw">
                <span class="nav-icon">ğŸ“š</span>
                <span>å­¦ä¹ </span>
            </div>
            <div class="mobile-nav-item" data-page="calculator">
                <span class="nav-icon">ğŸ“</span>
                <span>è®¡ç®—</span>
            </div>
            <div class="mobile-nav-item" data-page="reading">
                <span class="nav-icon">ğŸ“–</span>
                <span>é˜…è¯»</span>
            </div>
            <div class="mobile-nav-item" data-page="more">
                <span class="nav-icon">âš™ï¸</span>
                <span>æ›´å¤š</span>
            </div>
        </nav>

        <!-- ä¸»å†…å®¹åŒº -->
        <main class="main-content">
            <!-- é¡¶éƒ¨æ -->
            <header class="header">
                <h1 class="page-title" id="page-title">ä»Šæ—¥ä»»åŠ¡</h1>
                <div class="header-actions">
                    <div class="study-time">
                        <span class="time-icon">â±ï¸</span>
                        <span class="time-text">ä»Šæ—¥å­¦ä¹ : <strong id="today-time">0</strong> åˆ†é’Ÿ</span>
                    </div>
                    <div class="user-info" id="user-info" onclick="loginUI.showModal()">
                        <span class="user-avatar" id="user-avatar">ğŸ‘¤</span>
                        <span class="welcome-text" id="welcome-text">ä½ å¥½ï¼Œå¤‡è€ƒäºº ğŸ’ª</span>
                    </div>
                </div>
            </header>

            <!-- é¡µé¢å†…å®¹ -->
            <div class="page-content">
                <!-- ä»Šæ—¥ä»»åŠ¡é¡µé¢ -->
                <div class="page active" id="page-today">
                    <!-- æ‰‹æœºç«¯é¡¶éƒ¨ä¿¡æ¯æ  -->
                    <div class="mobile-top-bar">
                        <div class="study-time-mobile">
                            <span>â±ï¸</span>
                            <span>ä»Šæ—¥å­¦ä¹ : <strong id="today-time-mobile">0</strong> åˆ†é’Ÿ</span>
                        </div>
                        <div class="user-info-mobile" onclick="loginUI.showModal()">
                            <span id="user-avatar-mobile">ğŸ‘¤</span>
                            <span id="welcome-text-mobile">ç™»å½•/æ³¨å†Œ</span>
                        </div>
                    </div>
                    
                    <div class="welcome-card">
                        <div class="welcome-left">
                            <div class="welcome-avatar">ğŸ§ </div>
                            <div class="welcome-text-content">
                                <h2>å°å¿†åŠ©æ‰‹</h2>
                                <p>ä»Šæ—¥éœ€å¤ä¹  <strong id="today-review-count">--</strong> ä¸ª</p>
                            </div>
                        </div>
                        <div class="welcome-countdown" onclick="app.showExamDateModal()">
                            <div class="countdown-icon">ğŸ“…</div>
                            <div class="countdown-content">
                                <div class="countdown-label">è€ƒè¯•å€’è®¡æ—¶</div>
                                <div class="countdown-days">
                                    <span id="exam-countdown-mobile">--</span>
                                    <span class="countdown-unit">å¤©</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="today-stats">
                        <div class="stat-card">
                            <span class="stat-icon">ğŸ“š</span>
                            <span class="stat-value" id="today-new">--</span>
                            <span class="stat-label">æ–°å­¦çŸ¥è¯†å¤©</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">ğŸ”„</span>
                            <span class="stat-value" id="today-review">--</span>
                            <span class="stat-label">å¾…å¤å¤©</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">å¤©</span>
                            <span class="stat-value" id="today-completed">--</span>
                            <span class="stat-label">å·²å®Œå¤©</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-icon">ğŸ”¥</span>
                            <span class="stat-value" id="streak-days">--</span>
                            <span class="stat-label">è¿ç»­å¤©æ•°</span>
                        </div>
                    </div>

                    <div class="today-tasks">
                        <h3>ğŸ“‹ ä»Šæ—¥å­¦ä¹ ä»»åŠ¡</h3>
                        <div class="task-list" id="today-task-list">
                            <!-- åŠ¨æ€ç”Ÿæˆ-->
                        </div>
                    </div>

                    <!-- å¿«é€Ÿå¼€å§‹ - æ–°è®¾è®¡-->
                    <div class="quick-start-section">
                        <h3 class="section-title">âš¡ å¿«é€Ÿå¼€å§‹</h3>
                        <div class="quick-start-grid">
                            <div class="quick-start-card primary" onclick="app.startStudy()">
                                <div class="card-icon">ğŸ“–</div>
                                <div class="card-info">
                                    <span class="card-title">å¼€å§‹å­¦å¤©</span>
                                    <span class="card-desc">ç»§ç»­ä¸Šæ¬¡çš„è¿›å¤©</span>
                                </div>
                                <span class="card-arrow">å¤©</span>
                            </div>
                            <div class="quick-start-card" onclick="app.startQuiz()">
                                <div class="card-icon">ğŸ²</div>
                                <div class="card-info">
                                    <span class="card-title">éšæœºæŠ½æµ‹</span>
                                    <span class="card-desc">æ£€éªŒè®°å¿†æ•ˆå¤©</span>
                                </div>
                                <span class="card-arrow">å¤©</span>
                            </div>
                            <div class="quick-start-card" onclick="app.startReview()">
                                <div class="card-icon">ğŸ”„</div>
                                <div class="card-info">
                                    <span class="card-title">å¼€å§‹å¤å¤©</span>
                                    <span class="card-desc">ä»Šæ—¥éœ€å¤ä¹  0 å¤©</span>
                                </div>
                                <span class="card-arrow">å¤©</span>
                            </div>
                            <div class="quick-start-card english" onclick="app.switchPage('vocabulary')">
                                <div class="card-icon">ğŸ”¤</div>
                                <div class="card-info">
                                    <span class="card-title">è‹±è¯­å­¦ä¹ </span>
                                    <span class="card-desc">è¯æ±‡å­¦ä¹ ä¸å¤å¤©</span>
                                </div>
                                <span class="card-arrow">å¤©</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç»æµæ³•å­¦ä¹ é¡µé¢-->
                <div class="page" id="page-econlaw">
                    <!-- é¡¶éƒ¨å·¥å…·æ -->
                    <div class="econlaw-toolbar">
                        <div class="toolbar-search">
                            <span class="search-icon">ğŸ”</span>
                            <input type="text" placeholder="æœç´¢çŸ¥è¯†ç‚¹..." id="econlaw-search-input">
                        </div>
                        <div class="toolbar-actions">
                            <span id="knowledge-count" style="font-size: 13px; color: var(--text-secondary);">å…± 0 ä¸ª</span>
                            <button class="toolbar-btn" onclick="app.showEconDataModal()" title="å¯¼å…¥/å¯¼å‡º">
                                ğŸ’¾
                            </button>
                            <button class="toolbar-btn primary" onclick="app.showAddKnowledgeModal()" title="æ·»åŠ çŸ¥è¯†ç‚¹">
                                +
                            </button>
                        </div>
                    </div>
                    
                    <!-- æŒæ¡ç¨‹åº¦ç­›é€‰-->
                    <div class="mastery-filter">
                        <button class="mastery-btn active" data-mastery="all">å…¨éƒ¨</button>
                        <button class="mastery-btn" data-mastery="fuzzy">ğŸ˜µ æ²¡è®°ä½</button>
                        <button class="mastery-btn" data-mastery="normal">ğŸ˜ ä¸€èˆ¬</button>
                        <button class="mastery-btn" data-mastery="mastered">ğŸ˜ å·²æŒæ¡</button>
                    </div>
                    
                    <!-- åˆ†ç±»æ ‡ç­¾ï¼ˆç‚¹å‡»é€‰ä¸­/å–æ¶ˆï¼‰-->
                    <div class="module-filter">
                        <button class="filter-btn" data-module="socialism">ç¤¾ä¼šä¸»ä¹‰å¸‚åœºç»æµ</button>
                        <button class="filter-btn" data-module="fiscal">è´¢æ”¿å­¦</button>
                        <button class="filter-btn" data-module="international">å›½é™…ç»æµå­¦</button>
                        <button class="filter-btn" data-module="banking">è´§å¸é“¶è¡Œ</button>
                        <button class="filter-btn" data-module="western">è¥¿æ–¹ç»æµå­¦</button>
                    </div>
                    
                    <!-- é¢˜å‹ç­›é€‰ï¼ˆç‚¹å‡»é€‰ä¸­/å–æ¶ˆï¼‰-->
                    <div class="type-filter">
                        <button class="type-btn" data-type="term">åè¯è§£é‡Š</button>
                        <button class="type-btn" data-type="choice">é€‰æ‹©é¢˜</button>
                        <button class="type-btn" data-type="short">ç®€ç­”é¢˜</button>
                    </div>

                    <div class="knowledge-grid" id="econlaw-grid">
                        <!-- åŠ¨æ€ç”ŸæˆçŸ¥è¯†å¡ç‰‡-->
                    </div>
                </div>

                <!-- è‹±è¯­å•è¯é¡µé¢ - ç®€æ´é¦–é¡µ-->
                <div class="page" id="page-vocabulary">
                    <div class="page-header">
                        <h2>ğŸ”¤ è‹±è¯­å•è¯å­¦ä¹ </h2>
                        <div class="toolbar-actions">
                            <button class="toolbar-btn" onclick="smartVocabImport.showSmartImportModal()" title="æ™ºèƒ½å¯¼å…¥">
                                +
                            </button>
                            <button class="toolbar-btn" onclick="app.showVocabDataModal()" title="å¯¼å…¥/å¯¼å‡º">
                                ğŸ’¾
                            </button>
                        </div>
                    </div>
                    
                    <div class="page-content">
                        <!-- è¯æ±‡ç­‰çº§åˆ—è¡¨ -->
                        <div class="vocab-levels-list">
                            <div class="vocab-level-card" onclick="app.startVocabStudy('basic')">
                                <div class="level-info">
                                    <span class="level-icon">ğŸ“—</span>
                                    <div class="level-text">
                                        <span class="level-name">åŸºç¡€è¯æ±‡</span>
                                        <span class="level-count" id="basic-count">åŠ è½½ä¸­...</span>
                                    </div>
                                </div>
                                <span class="level-arrow">å¤©</span>
                            </div>
                            <div class="vocab-level-card" onclick="app.startVocabStudy('intermediate')">
                                <div class="level-info">
                                    <span class="level-icon">ğŸ“™</span>
                                    <div class="level-text">
                                        <span class="level-name">ä¸­çº§è¯æ±‡</span>
                                        <span class="level-count" id="intermediate-count">åŠ è½½ä¸­...</span>
                                    </div>
                                </div>
                                <span class="level-arrow">å¤©</span>
                            </div>
                            <div class="vocab-level-card" onclick="app.startVocabStudy('advanced')">
                                <div class="level-info">
                                    <span class="level-icon">ğŸ“˜</span>
                                    <div class="level-text">
                                        <span class="level-name">é«˜çº§è¯æ±‡</span>
                                        <span class="level-count" id="advanced-count">åŠ è½½ä¸­...</span>
                                    </div>
                                </div>
                                <span class="level-arrow">å¤©</span>
                            </div>
                            <div class="vocab-level-card" onclick="app.startVocabStudy('phrase')">
                                <div class="level-info">
                                    <span class="level-icon">ğŸ“•</span>
                                    <div class="level-text">
                                        <span class="level-name">è¯ç»„æ­é…</span>
                                        <span class="level-count" id="phrase-count">åŠ è½½ä¸­...</span>
                                    </div>
                                </div>
                                <span class="level-arrow">å¤©</span>
                            </div>
                        </div>
                        
                        <!-- è¯æ±‡æ¸¸æˆå…¥å£ -->
                        <div class="vocab-game-entry" onclick="vocabGames.showGameMenu()">
                            <div class="game-entry-icon">ğŸ®</div>
                            <div class="game-entry-text">
                                <h3>è¯æ±‡æ¸¸æˆ</h3>
                                <p>é€šè¿‡æ¸¸æˆè½»æ¾è®°å¿†å•è¯</p>
                            </div>
                            <div class="game-entry-arrow">â€º</div>
                        </div>
                        
                        <!-- å­¦ä¹ ç»Ÿè®¡ -->
                        <div class="vocab-stats-simple">
                            <div class="vocab-stat-item">
                                <span class="stat-num" id="vocab-total">0</span>
                                <span class="stat-label">æ€»è¯å¤©</span>
                            </div>
                            <div class="vocab-stat-item">
                                <span class="stat-num" id="vocab-learning">0</span>
                                <span class="stat-label">å­¦ä¹ å¤©</span>
                            </div>
                            <div class="vocab-stat-item">
                                <span class="stat-num" id="vocab-mastered">0</span>
                                <span class="stat-label">å·²æŒå¤©</span>
                            </div>
                        </div>
                        
                        <!-- å­¦ä¹ æ˜ç»† -->
                        <div class="vocab-detail-list">
                            <h4>ğŸ“Š å­¦ä¹ æ˜ç»†</h4>
                            <div class="detail-header">
                                <span>ç­‰çº§</span>
                                <span>æ€»è¯å¤©</span>
                                <span>å­¦ä¹ å¤©</span>
                                <span>å·²æŒå¤©</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-name">ğŸ“— åŸºç¡€è¯æ±‡</span>
                                <span class="detail-total" id="basic-total">-</span>
                                <span class="detail-learning" id="basic-learning">-</span>
                                <span class="detail-mastered" id="basic-mastered">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-name">ğŸ“™ ä¸­çº§è¯æ±‡</span>
                                <span class="detail-total" id="intermediate-total">-</span>
                                <span class="detail-learning" id="intermediate-learning">-</span>
                                <span class="detail-mastered" id="intermediate-mastered">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-name">ğŸ“˜ é«˜çº§è¯æ±‡</span>
                                <span class="detail-total" id="advanced-total">-</span>
                                <span class="detail-learning" id="advanced-learning">-</span>
                                <span class="detail-mastered" id="advanced-mastered">-</span>
                            </div>
                            <div class="detail-item">
                                <span class="detail-name">ğŸ“• è¯ç»„æ­é…</span>
                                <span class="detail-total" id="phrase-total">-</span>
                                <span class="detail-learning" id="phrase-learning">-</span>
                                <span class="detail-mastered" id="phrase-mastered">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å…¨å±å•è¯å­¦ä¹ ç•Œé¢ -->
                <div class="fullscreen-modal" id="vocab-study-modal" style="display: none;">
                    <div class="fullscreen-header">
                        <button class="back-btn" onclick="app.closeVocabStudy()">â† è¿”å›</button>
                        <span class="fullscreen-title" id="vocab-study-title">åŸºç¡€è¯æ±‡</span>
                        <select class="group-selector" id="group-selector" onchange="app.switchGroup(this.value)">
                            <option value="1">ç¬¬1ç»„</option>
                        </select>
                    </div>
                    
                    <div class="fullscreen-content">
                        <!-- è¿›åº¦æ¡å’Œå¯¼èˆª -->
                        <div class="study-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="vocab-progress-fill"></div>
                            </div>
                            <div class="progress-nav">
                                <button class="nav-arrow" onclick="app.prevWord()">â—€</button>
                                <span class="progress-text" id="vocab-progress-text">1 / 10</span>
                                <button class="nav-arrow" onclick="app.nextWord()">â–¶</button>
                            </div>
                        </div>
                        
                        <!-- å•è¯å¡ç‰‡ -->
                        <div class="study-card">
                            <div class="word-display">
                                <h1 class="study-word" id="current-word">abandon</h1>
                                <p class="study-phonetic" id="current-phonetic">/É™ËˆbÃ¦ndÉ™n/</p>
                                <button class="sound-btn" onclick="app.playWordSound()">ğŸ”Š</button>
                            </div>
                            
                            <div class="meaning-display" id="meaning-section" style="display: none;">
                                <div class="study-meaning" id="current-meaning">v. æ”¾å¼ƒï¼Œé—å¼ƒ n. æ”¾çºµ</div>
                                <div class="study-similar" id="similar-words">
                                    <span>ç›¸ä¼¼è¯ï¼šdesert, forsake, quit</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- æ“ä½œæŒ‰é’® -->
                        <div class="study-actions">
                            <button class="action-btn primary" id="show-meaning-btn" onclick="app.showWordMeaning()">æ˜¾ç¤ºè¯æ„</button>
                            <div class="feedback-btns" id="feedback-btns" style="display: none;">
                                <button class="feedback-btn wrong" onclick="app.markWord('wrong')">ğŸ¤” ä¸è®¤è¯†</button>
                                <button class="feedback-btn vague" onclick="app.markWord('vague')">ğŸ˜ æ¨¡ç³Š</button>
                                <button class="feedback-btn correct" onclick="app.markWord('correct')">ğŸ˜Š è®¤è¯†</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- è®°å¿†æŠ½æµ‹é¡µé¢ -->
                <div class="page" id="page-quiz">
                    <div class="quiz-setup" id="quiz-setup">
                        <h2>ğŸ² è®°å¿†æŠ½æµ‹</h2>
                        <p>é€‰æ‹©æŠ½æµ‹èŒƒå›´å’Œé¢˜å‹ï¼Œæ£€éªŒä½ çš„è®°å¿†æ•ˆæœ</p>
                        
                        <div class="quiz-options">
                            <div class="option-group">
                                <label>çŸ¥è¯†æ¨¡å—</label>
                                <select id="quiz-module">
                                    <option value="all">å…¨éƒ¨æ¨¡å—</option>
                                    <option value="socialism">ç¤¾ä¼šä¸»ä¹‰å¸‚åœºç»æµ</option>
                                    <option value="fiscal">è´¢æ”¿å­¦</option>
                                    <option value="international">å›½é™…ç»æµå­¦</option>
                                    <option value="banking">è´§å¸é“¶è¡Œ</option>
                                    <option value="western">è¥¿æ–¹ç»æµå­¦</option>
                                </select>
                            </div>
                            <div class="option-group">
                                <label>é¢˜å‹</label>
                                <select id="quiz-type">
                                    <option value="all">å…¨éƒ¨é¢˜å‹</option>
                                    <option value="choice">é€‰æ‹©é¢˜è€ƒç‚¹</option>
                                    <option value="term">åè¯è§£é‡Š</option>
                                    <option value="short">ç®€ç­”é¢˜</option>
                                </select>
                            </div>
                            <div class="option-group">
                                <label>é¢˜ç›®æ•°é‡</label>
                                <select id="quiz-count">
                                    <option value="5">5é¢˜</option>
                                    <option value="10" selected>10é¢˜</option>
                                    <option value="20">20é¢˜</option>
                                    <option value="30">30é¢˜</option>
                                </select>
                            </div>
                        </div>
                        
                        <button class="start-quiz-btn" onclick="app.generateQuiz()">å¼€å§‹æŠ½æµ‹</button>
                    </div>

                    <div class="quiz-container" id="quiz-container" style="display: none;">
                        <div class="quiz-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="quiz-progress-fill"></div>
                            </div>
                            <span class="progress-text" id="quiz-progress-text">1/10</span>
                        </div>
                        
                        <div class="quiz-card" id="quiz-card">
                            <div class="quiz-question">
                                <span class="question-type" id="question-type">åè¯è§£é‡Š</span>
                                <h3 id="question-text">ä»€ä¹ˆæ˜¯"å…è´¹æ­è½¦è¡Œä¸º"ï¼Ÿ</h3>
                            </div>
                            <div class="quiz-answer-section">
                                <button class="show-answer-btn" onclick="app.showAnswer()">æ˜¾ç¤ºç­”æ¡ˆ</button>
                                <div class="quiz-answer" id="quiz-answer" style="display: none;">
                                    <div class="answer-content" id="answer-content"></div>
                                    <div class="memory-tip" id="memory-tip"></div>
                                </div>
                            </div>
                            <div class="quiz-feedback" id="quiz-feedback" style="display: none;">
                                <p>è¿™ä¸ªçŸ¥è¯†ç‚¹æŒæ¡å¾—å¦‚ä½•ï¼Ÿ</p>
                                <div class="feedback-buttons">
                                    <button class="feedback-btn fuzzy" onclick="app.recordFeedback('fuzzy')">
                                        <span>ğŸ˜µ</span> æ¨¡ç³Š/é”™è¯¯
                                    </button>
                                    <button class="feedback-btn normal" onclick="app.recordFeedback('normal')">
                                        <span>ğŸ˜</span> ä¸€èˆ¬/çŠ¹è±«
                                    </button>
                                    <button class="feedback-btn mastered" onclick="app.recordFeedback('mastered')">
                                        <span>ğŸ˜</span> ç†Ÿç»ƒ/ç§’ç­”
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quiz-nav">
                            <button class="nav-btn" onclick="app.prevQuestion()" id="prev-btn">ä¸Šä¸€é¢˜</button>
                            <button class="nav-btn primary" onclick="app.nextQuestion()" id="next-btn">ä¸‹ä¸€é¢˜</button>
                        </div>
                    </div>

                    <div class="quiz-result" id="quiz-result" style="display: none;">
                        <div class="result-header">
                            <span class="result-icon">ğŸ‰</span>
                            <h2>æŠ½æµ‹å®Œæˆï¼</h2>
                        </div>
                        <div class="result-stats">
                            <div class="result-item">
                                <span class="result-label">æ€»é¢˜å¤©</span>
                                <span class="result-value" id="result-total">10</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">ç†Ÿç»ƒ</span>
                                <span class="result-value mastered" id="result-mastered">0</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">ä¸€å¤©</span>
                                <span class="result-value normal" id="result-normal">0</span>
                            </div>
                            <div class="result-item">
                                <span class="result-label">æ¨¡ç³Š</span>
                                <span class="result-value fuzzy" id="result-fuzzy">0</span>
                            </div>
                        </div>
                        <div class="result-message" id="result-message"></div>
                        <div class="result-actions">
                            <button class="action-btn" onclick="app.restartQuiz()">å†æµ‹ä¸€æ¬¡</button>
                            <button class="action-btn primary" onclick="app.goToReview()">å»å¤ä¹ è–„å¼±ç‚¹</button>
                        </div>
                    </div>
                </div>

                <!-- å¤ä¹ ä¸­å¿ƒé¡µé¢ -->
                <div class="page" id="page-review">
                    <div class="review-header">
                        <h2>ğŸ”„ è‰¾å®¾æµ©æ–¯å¤ä¹ ä¸­å¿ƒ</h2>
                        <p>æ ¹æ®é—å¿˜æ›²çº¿ï¼Œç§‘å­¦å®‰æ’å¤ä¹ </p>
                    </div>

                    <div class="review-priority">
                        <div class="priority-card urgent">
                            <div class="priority-icon">ğŸ”¥</div>
                            <div class="priority-info">
                                <h4>ç´§æ€¥å¤ä¹ </h4>
                                <p>è®°å¿†å¼ºåº¦ &lt; 30%ï¼Œå³å°†é—å¿˜</p>
                                <span class="priority-count" id="urgent-count">0</span>
                            </div>
                            <button class="priority-btn" onclick="app.startPriorityReview('urgent')">ç«‹å³å¤ä¹ </button>
                        </div>
                        <div class="priority-card normal">
                            <div class="priority-icon">âš¡</div>
                            <div class="priority-info">
                                <h4>å·©å›ºå¼ºåŒ–</h4>
                                <p>è®°å¿†å¼ºåº¦ 30%-70%ï¼Œéœ€è¦å·©å›º</p>
                                <span class="priority-count" id="normal-count">0</span>
                            </div>
                            <button class="priority-btn" onclick="app.startPriorityReview('normal')">å¼€å§‹å¤ä¹ </button>
                        </div>
                        <div class="priority-card mastered">
                            <div class="priority-icon">ğŸ§ </div>
                            <div class="priority-info">
                                <h4>é•¿æœŸè®°å¿†</h4>
                                <p>è®°å¿†å¼ºåº¦ &gt; 70%ï¼Œé—´éš”å¤ä¹ </p>
                                <span class="priority-count" id="mastered-count">0</span>
                            </div>
                            <button class="priority-btn" onclick="app.startPriorityReview('mastered')">ä¿æŒè®°å¿†</button>
                        </div>
                    </div>

                    <div class="review-schedule">
                        <h3>ğŸ“… ä»Šæ—¥å¤ä¹ è®¡åˆ’</h3>
                        <div class="schedule-list" id="review-schedule-list">
                            <!-- åŠ¨æ€ç”Ÿæˆ-->
                        </div>
                    </div>
                </div>

                <!-- å­¦ä¹ æ•°æ®é¡µé¢ -->
                <div class="page" id="page-stats">
                    <div class="stats-overview">
                        <div class="overview-card">
                            <span class="overview-icon">ğŸ“š</span>
                            <div class="overview-info">
                                <span class="overview-value" id="total-knowledge">0</span>
                                <span class="overview-label">çŸ¥è¯†ç‚¹æ€»æ•°</span>
                            </div>
                        </div>
                        <div class="overview-card">
                            <span class="overview-icon">å¤©</span>
                            <div class="overview-info">
                                <span class="overview-value" id="learned-knowledge">0</span>
                                <span class="overview-label">å·²å­¦å¤©</span>
                            </div>
                        </div>
                        <div class="overview-card">
                            <span class="overview-icon">ğŸ¯</span>
                            <div class="overview-info">
                                <span class="overview-value" id="mastered-rate">0%</span>
                                <span class="overview-label">æŒæ¡å¤©</span>
                            </div>
                        </div>
                        <div class="overview-card">
                            <span class="overview-icon">â±ï¸</span>
                            <div class="overview-info">
                                <span class="overview-value" id="total-study-time">0</span>
                                <span class="overview-label">å­¦ä¹ æ—¶é•¿(å°æ—¶)</span>
                            </div>
                        </div>
                    </div>

                    <div class="stats-charts">
                        <div class="chart-card">
                            <h4>æ¨¡å—æŒæ¡åº¦</h4>
                            <div class="module-progress" id="module-progress">
                                <!-- åŠ¨æ€ç”Ÿæˆ-->
                            </div>
                        </div>
                        <div class="chart-card">
                            <h4>7å¤©å­¦ä¹ è¶‹åŠ¿</h4>
                            <div class="trend-chart" id="trend-chart">
                                <!-- ç®€åŒ–çš„æŸ±çŠ¶å›¾-->
                            </div>
                        </div>
                    </div>

                    <div class="stats-achievements">
                        <h4>ğŸ† å­¦ä¹ æˆå°±</h4>
                        <div class="achievements-grid" id="achievements-grid">
                            <!-- åŠ¨æ€ç”Ÿæˆ-->
                        </div>
                    </div>
                </div>

                <!-- å­¦ä¹ è®¡åˆ’é¡µé¢ -->
                <div class="page" id="page-schedule">
                    <div class="schedule-calendar">
                        <h2>ğŸ“… 2-3æœˆå­¦ä¹ è®¡åˆ’</h2>
                        <div class="calendar-nav">
                            <button class="cal-nav-btn" onclick="app.prevMonth()">â—€</button>
                            <span class="cal-month" id="calendar-month">2026å¹´2æœˆ</span>
                            <button class="cal-nav-btn" onclick="app.nextMonth()">â–¶</button>
                        </div>
                        <div class="calendar-grid" id="calendar-grid">
                            <!-- åŠ¨æ€ç”Ÿæˆæ—¥å†-->
                        </div>
                    </div>

                    <div class="schedule-detail" id="schedule-detail">
                        <h3>ğŸ“‹ ä»Šæ—¥è¯¦ç»†å®‰æ’</h3>
                        <div class="detail-content" id="schedule-detail-content">
                            <!-- åŠ¨æ€ç”Ÿæˆ-->
                        </div>
                    </div>
                </div>

                <!-- è§†é¢‘è¯¾ç¨‹é¡µé¢ -->
                <div class="page" id="page-videos">
                    <div class="videos-header">
                        <h2>ğŸ¬ è§†é¢‘è¯¾ç¨‹å­¦ä¹ è·Ÿè¸ª</h2>
                        <div class="videos-stats">
                            <div class="video-stat">
                                <span class="stat-num" id="video-total">0</span>
                                <span class="stat-label">æ€»è¯¾å¤©</span>
                            </div>
                            <div class="video-stat">
                                <span class="stat-num" id="video-watched">0</span>
                                <span class="stat-label">å·²è§‚å¤©</span>
                            </div>
                            <div class="video-stat">
                                <span class="stat-num" id="video-skipped">0</span>
                                <span class="stat-label">å·²è·³å¤©</span>
                            </div>
                            <div class="video-stat">
                                <span class="stat-num" id="video-review">0</span>
                                <span class="stat-label">å·²å¤å¤©</span>
                            </div>
                            <div class="video-stat">
                                <span class="stat-num" id="video-progress">0%</span>
                                <span class="stat-label">æ€»è¿›å¤©</span>
                            </div>
                        </div>
                    </div>

                    <div class="videos-search-box">
                        <input type="text" id="video-search-input" placeholder="è¾“å…¥ç®€ç§°æœç´¢ï¼Œå¦‚ï¼šè´¢æ”¿ã€å›½ç»ã€è‹±åˆã€å¾®è§‚...">
                        <button class="search-btn" onclick="app.searchVideos()">ğŸ”</button>
                    </div>
                    <div class="videos-tabs">
                        <button class="tab-btn active" data-tab="all">å…¨éƒ¨è§†é¢‘</button>
                        <button class="tab-btn" data-tab="econ">ç»æµå­¦</button>
                        <button class="tab-btn" data-tab="eng">è‹±è¯­</button>
                    </div>
                    <div class="videos-filter">
                        <button class="filter-btn active" data-filter="all">å…¨éƒ¨</button>
                        <button class="filter-btn" data-filter="planned">è®¡åˆ’ä¸­</button>
                        <button class="filter-btn" data-filter="watched">å·²è§‚çœ‹</button>
                        <button class="filter-btn" data-filter="skipped">å·²è·³è¿‡</button>
                        <button class="filter-btn" data-filter="reviewed">å·²å¤ä¹ </button>
                        <button class="filter-btn" data-filter="missed">æ¼çœ‹</button></button>
                    </div>

                    <div class="videos-list" id="videos-list">
                        <!-- åŠ¨æ€ç”Ÿæˆè§†é¢‘åˆ—è¡¨-->
                    </div>
                </div>

                <!-- æ—¥æŠ¥é¡µé¢ -->
                <div class="page" id="page-daily">
                    <div class="daily-header">
                        <h2>ğŸ“ å­¦ä¹ æ—¥æŠ¥</h2>
                        <p>ä»Šæ—¥å­¦ä¹ è‡ªåŠ¨è®°å½•ï¼Œè¡¥å……æ„Ÿå—ä¸è®¡åˆ’å³å¯</p>
                    </div>

                    <div class="daily-container">
                        <div class="daily-editor">
                            <div class="editor-header">
                                <h3>âœï¸ å†™æ—¥æŠ¥</h3>
                                <div class="date-selector">
                                    <input type="date" id="daily-date-input" value="" max="">
                                    <span class="editor-date" id="daily-editor-date"></span>
                                </div>
                            </div>
                            <div class="editor-form">
                                <!-- è‡ªåŠ¨ç”Ÿæˆï¼šä»Šæ—¥å­¦ä¹ -->
                                <div class="form-group auto-section">
                                    <label>ğŸ“š ä»Šæ—¥å­¦ä¹ ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰</label>
                                    <div class="auto-content" id="daily-auto-content">
                                        <p class="loading-text">æ­£åœ¨åŠ è½½ä»Šæ—¥å­¦ä¹ è®°å½•...</p>
                                    </div>
                                </div>
                                
                                <!-- æ‰‹åŠ¨å¡«å†™ï¼šå­¦ä¹ æ„Ÿå—-->
                                <div class="form-group">
                                    <label>ğŸ’­ å­¦ä¹ æ„Ÿå— / éš¾ç‚¹ / æ”¶è·</label>
                                    <textarea id="daily-feeling" rows="5" placeholder="ä»Šå¤©å­¦å¾—æ€ä¹ˆæ ·ï¼Ÿæœ‰ä»€ä¹ˆä¸æ‡‚çš„åœ°æ–¹ï¼Ÿæœ‰ä»€ä¹ˆæ”¶è·ï¼Ÿ"></textarea>
                                </div>
                                
                                <!-- æ‰‹åŠ¨å¡«å†™ï¼šæ˜æ—¥è®¡åˆ’-->
                                <div class="form-group">
                                    <label>ğŸ“… æ˜æ—¥è®¡åˆ’</label>
                                    <textarea id="daily-plan" rows="2" placeholder="æ˜å¤©æ‰“ç®—å­¦ä»€ä¹ˆï¼Ÿ"></textarea>
                                </div>
                                
                                <button class="save-daily-btn" onclick="app.saveDailyReport()">ğŸ’¾ ä¿å­˜æ—¥æŠ¥</button>
                            </div>
                        </div>

                        <div class="daily-list">
                            <h3>ğŸ“‹ å†å²æ—¥æŠ¥</h3>
                            <div class="daily-items" id="daily-items">
                                <!-- åŠ¨æ€ç”Ÿæˆæ—¥æŠ¥åˆ—è¡¨-->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ—¥æŠ¥è¯¦æƒ…å¼¹çª— -->
                <div class="modal" id="daily-detail-modal" style="display: none;">
                    <div class="modal-content daily-modal-content">
                        <div class="modal-header">
                            <h3 id="daily-modal-date">ğŸ“… æ—¥æŠ¥è¯¦æƒ…</h3>
                            <button class="modal-close" onclick="app.closeDailyModal()">Ã—</button>
                        </div>
                        <div class="modal-body" id="daily-modal-body">
                            <!-- åŠ¨æ€ç”Ÿæˆæ—¥æŠ¥è¯¦æƒ…-->
                        </div>
                    </div>
                </div>

                <!-- å‘¨æŠ¥æœˆæŠ¥é¡µé¢ -->
                <div class="page" id="page-reports">
                    <div class="reports-header">
                        <h2>ğŸ“ˆ å­¦ä¹ æŠ¥å‘Š</h2>
                        <div class="report-tabs">
                            <button class="report-tab active" onclick="app.switchReportTab('weekly')">å‘¨æŠ¥</button>
                            <button class="report-tab" onclick="app.switchReportTab('monthly')">æœˆæŠ¥</button>
                        </div>
                    </div>

                    <!-- å‘¨æŠ¥ -->
                    <div class="report-content" id="weekly-report">
                        <div class="report-controls">
                            <select id="week-selector" onchange="app.loadWeeklyReport(this.value)">
                                <option value="">é€‰æ‹©å‘¨æ¬¡...</option>
                            </select>
                            <button class="generate-btn" onclick="app.generateWeeklyReport()">ğŸ”„ ç”Ÿæˆæœ¬å‘¨å‘¨æŠ¥</button>
                        </div>
                        <div class="report-card" id="weekly-content">
                            <div class="report-empty">
                                <span class="empty-icon">ğŸ“</span>
                                <p>é€‰æ‹©å‘¨æ¬¡æˆ–ç‚¹å‡»ç”ŸæˆæŒ‰é’®æŸ¥çœ‹å‘¨æŠ¥</p>
                            </div>
                        </div>
                    </div>

                    <!-- æœˆæŠ¥ -->
                    <div class="report-content" id="monthly-report" style="display: none;">
                        <div class="report-controls">
                            <select id="month-selector" onchange="app.loadMonthlyReport(this.value)">
                                <option value="">é€‰æ‹©æœˆä»½...</option>
                                <option value="2026-02">2026å¹´2æœˆ</option>
                                <option value="2026-03">2026å¹´2æœˆ</option>
                            </select>
                            <button class="generate-btn" onclick="app.generateMonthlyReport()">ğŸ”„ ç”Ÿæˆæœ¬æœˆæœˆæŠ¥</button>
                        </div>
                        <div class="report-card" id="monthly-content">
                            <div class="report-empty">
                                <span class="empty-icon">ğŸ“</span>
                                <p>é€‰æ‹©æœˆä»½æˆ–ç‚¹å‡»ç”ŸæˆæŒ‰é’®æŸ¥çœ‹æœˆæŠ¥</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç»æµè®¡ç®—é¢˜åº“é¡µé¢ -->
                <div class="page" id="page-calculator">
                    <div class="calc-bank-header">
                        <h2>ğŸ“š ç»æµè®¡ç®—é¢˜åº“</h2>
                        <p>ç»æµå­¦è®¡ç®—é¢˜ç»ƒä¹ ï¼Œæ”¯æŒå¯¼å…¥/å¯¼å‡ºè¯•é¢˜</p>
                        <div class="calc-bank-actions">
                            <button class="calc-action-btn" onclick="app.showImportCalcModal()">
                                <span class="icon">ğŸ“¤</span>
                                <span>å¯¼å…¥</span>
                            </button>
                            <button class="calc-action-btn" onclick="app.showAddCalcModal()">
                                <span class="icon">å¤©</span>
                                <span>æ–°å»º</span>
                            </button>
                            <button class="calc-action-btn" onclick="app.exportCalcQuestions()">
                                <span class="icon">ğŸ“¥</span>
                                <span>å¯¼å‡º</span>
                            </button>
                        </div>
                    </div>

                    <div class="calc-filter">
                        <button class="calc-filter-btn active" onclick="app.setCalcFilter('all')">å…¨éƒ¨</button>
                        <button class="calc-filter-btn" onclick="app.setCalcFilter('micro')">å¾®è§‚</button>
                        <button class="calc-filter-btn" onclick="app.setCalcFilter('macro')">å®è§‚</button>
                        <button class="calc-filter-btn" onclick="app.setCalcFilter('fiscal')">è´¢æ”¿</button>
                        <button class="calc-filter-btn" onclick="app.setCalcFilter('monetary')">è´§å¸</button>
                    </div>

                    <div class="calc-question-list" id="calc-question-list">
                        <!-- è®¡ç®—é¢˜åˆ—è¡¨åŠ¨æ€ç”Ÿæˆ-->
                        <div class="calc-empty">
                            <span class="empty-icon">ğŸ“š</span>
                            <p>æš‚æ— è®¡ç®—é¢˜</p>
                            <button onclick="app.showAddCalcModal()">æ·»åŠ ç¬¬ä¸€é“è¯•é¢˜</button>
                        </div>
                    </div>
                </div>

                <!-- è‹±è¯­é˜…è¯»ç†è§£é¡µé¢ -->
                <div class="page" id="page-reading">
                    <div class="reading-header">
                        <h2>ğŸ“– è‹±è¯­é˜…è¯»ç†è§£</h2>
                        <p>AIç‚¹è¯»ç¿»è¯‘ï¼Œç‚¹å‡»è‹±æ–‡æ˜¾ç¤ºä¸­æ–‡</p>
                        <div class="reading-actions">
                            <button class="reading-action-btn" onclick="app.showImportReadingModal()">
                                <span class="icon">ğŸ“¤</span><span>å¯¼å…¥</span>
                            </button>
                            <button class="reading-action-btn" onclick="app.toggleReadingMode()">
                                <span class="icon">ğŸ‘å¤©</span><span>å…¨è¯‘</span>
                            </button>
                        </div>
                    </div>

                    <div class="reading-filter">
                        <button class="reading-filter-btn active" onclick="app.setReadingFilter('all')">å…¨éƒ¨</button>
                        <button class="reading-filter-btn" onclick="app.setReadingFilter('2024')">2024</button>
                        <button class="reading-filter-btn" onclick="app.setReadingFilter('2023')">2023</button>
                        <button class="reading-filter-btn" onclick="app.setReadingFilter('2022')">2022</button>
                        <button class="reading-filter-btn" onclick="app.setReadingFilter('older')">æ›´æ—©</button>
                    </div>

                    <div class="reading-paper-list" id="reading-paper-list">
                        <!-- è‹±è¯­æ–‡ç« åˆ—è¡¨åŠ¨æ€ç”Ÿæˆ-->
                    </div>
                </div>

                <!-- é˜…è¯»è¯¦æƒ…é¡µï¼ˆç‚¹è¯»æ¨¡å¼ï¼‰-->
                <div class="page" id="page-reading-detail" style="display: none;">
                    <div class="reading-detail-header">
                        <button class="back-btn" onclick="app.closeReadingDetail()">â† è¿”å›</button>
                        <div class="reading-progress">
                            <span id="reading-progress-text">0/0</span>
                        </div>
                        <button class="favorite-btn" onclick="app.toggleReadingFavorite()" id="reading-fav-btn">ğŸ¤</button>
                    </div>
                    
                    <!-- ML Kit ç¿»è¯‘çŠ¶æ€æç¤º-->
                    <div class="mlkit-translate-hint" id="mlkit-translate-hint" style="display: none;">
                        <span class="hint-icon">ğŸ¤–</span>
                        <span>ç‚¹å‡»å¥å­å³å¯ä½¿ç”¨ AI æœ¬åœ°ç¿»è¯‘</span>
                        <button class="mlkit-download-btn" onclick="app.downloadMlKitModel()" id="mlkit-download-btn">ä¸‹è½½æ¨¡å‹</button>
                    </div>
                    
                    <div class="reading-detail-content" id="reading-detail-content">
                        <!-- ç‚¹è¯»å†…å®¹åŠ¨æ€ç”Ÿæˆ-->
                    </div>
                    
                    <div class="reading-detail-toolbar">
                        <button onclick="app.toggleAllTranslation()">ğŸ‘ï¸ æ˜¾ç¤º/éšè—å…¨æ–‡ç¿»è¯‘</button>
                        <button onclick="app.startReadingQuiz()">ğŸ“ å¼€å§‹åšé¢˜</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- ç»æµæ³•å­¦ä¹ å…¨å±ç•Œé¢-->
    <div class="fullscreen-modal" id="econlaw-study-modal" style="display: none;">
        <div class="fullscreen-header">
            <button class="back-btn" onclick="app.closeEconLawStudy()">â† è¿”å›</button>
            <span class="fullscreen-title" id="econlaw-study-module">ç»æµæ³•å­¦å¤©</span>
            <span></span>
        </div>
        <div class="fullscreen-content" id="econlaw-study-content">
            <!-- åŠ¨æ€ç”Ÿæˆ-->
        </div>
    </div>

    <!-- è§†é¢‘è¯¦æƒ…å¼¹çª— -->
    <div class="modal" id="video-modal" style="display: none;">
        <div class="modal-content">
            <button class="modal-close" onclick="app.closeVideoModal()">Ã—</button>
            <div class="modal-body" id="video-modal-body">
                <!-- åŠ¨æ€ç”Ÿæˆ-->
            </div>
        </div>
    </div>

    <!-- è¯æ±‡å¯¼å…¥å¼¹çª— -->
    <div class="modal" id="import-modal" style="display: none;">
        <div class="modal-content">
            <button class="modal-close" onclick="app.closeImportModal()">Ã—</button>
            <div class="modal-body">
                <h2>ğŸ“¥ å¯¼å…¥è¯æ±‡åº“</h2>
                <p class="import-desc">æ”¯æŒ JSONã€CSVã€TXT æ ¼å¼ï¼Œå¯å¯¼å…¥ä¸­çº§ã€é«˜çº§è¯æ±‡æˆ–è¯ç»„æ­é…</p>
                
                <div class="import-form">
                    <div class="form-group">
                        <label>é€‰æ‹©æ–‡ä»¶</label>
                        <input type="file" id="vocab-file-input" accept=".json,.csv,.txt" onchange="app.previewVocabularyFile()">
                    </div>
                    
                    <div class="form-group">
                        <label>è¯æ±‡ç­‰çº§</label>
                        <select id="import-level">
                            <option value="basic">åŸºç¡€è¯æ±‡</option>
                            <option value="intermediate">ä¸­çº§è¯æ±‡</option>
                            <option value="advanced">é«˜çº§è¯æ±‡</option>
                            <option value="phrase">è¯ç»„æ­é…</option>
                            <option value="custom">è‡ªå®šä¹‰</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>åˆ†ç»„ç¼–å·</label>
                        <input type="number" id="import-group" value="1" min="1" placeholder="å¦‚ï¼š1ã€2...">
                    </div>
                    
                    <div class="form-group">
                        <label>æ ¼å¼è¯´æ˜</label>
                        <div class="format-examples">
                            <details>
                                <summary>JSON æ ¼å¼ç¤ºä¾‹</summary>
                                <pre>[{"word": "example", "phonetic": "/ÉªÉ¡ËˆzÃ¦mpl/", "meaning": "n. ä¾‹å­"}]</pre>
                            </details>
                            <details>
                                <summary>CSV æ ¼å¼ç¤ºä¾‹</summary>
                                <pre>word,phonetic,meaning
example,/ÉªÉ¡ËˆzÃ¦mpl/,n. ä¾‹å­</pre>
                            </details>
                            <details>
                                <summary>TXT æ ¼å¼ç¤ºä¾‹</summary>
                                <pre>example | /ÉªÉ¡ËˆzÃ¦mpl/ | n. ä¾‹å­</pre>
                            </details>
                        </div>
                    </div>
                    
                    <div class="import-preview" id="import-preview" style="display: none;">
                        <h4>é¢„è§ˆ</h4>
                        <p id="preview-stats"></p>
                        <div class="preview-list" id="preview-list"></div>
                    </div>
                    
                    <button class="save-daily-btn" onclick="app.importVocabulary()">ç¡®è®¤å¯¼å…¥</button>
                </div>
            </div>
        </div>
    </div>

    <!-- è®¡ç®—é¢˜è¯¦æƒ…å¼¹çª—-->
    <div class="modal" id="calc-detail-modal" style="display: none;">
        <div class="modal-content calc-detail-content">
            <div class="modal-header">
                <h3 id="calc-detail-title">é¢˜ç›®è¯¦æƒ…</h3>
                <button class="modal-close" onclick="app.closeCalcDetailModal()">Ã—</button>
            </div>
            <div class="modal-body calc-detail-body" id="calc-detail-body">
                <!-- å†…å®¹åŠ¨æ€å¡«å……-->
            </div>
        </div>
    </div>

    <!-- å­¦ä¹ å®Œæˆæç¤º -->
    <div class="toast" id="toast" style="display: none;">
        <span class="toast-icon">ğŸ‰</span>
        <span class="toast-message" id="toast-message"></span>
    </div>

    <!-- ç™»å½•å¼¹çª— -->
    <div class="modal" id="login-modal" style="display: none;">
        <div class="modal-content login-modal-content">
            <button class="modal-close" onclick="loginUI.closeModal()">Ã—</button>
            <div class="login-body">
                <div class="login-header">
                    <span class="login-icon">ğŸ”</span>
                    <h2>ç”¨æˆ·ç™»å½•</h2>
                    <p>ç™»å½•åå¯åŒæ­¥å­¦ä¹ è¿›åº¦å’Œè®¾ç½®</p>
                </div>
                
                <div id="login-form-section">
                    <div class="login-tabs">
                        <button class="login-tab active" data-tab="login" onclick="loginUI.switchTab('login')">ç™»å½•</button>
                        <button class="login-tab" data-tab="register" onclick="loginUI.switchTab('register')">æ³¨å†Œ</button>
                    </div>
                    
                    <form class="login-form" id="login-form" onsubmit="loginUI.handleLogin(event)">
                        <div class="form-group">
                            <label>ç”¨æˆ·å</label>
                            <input type="text" id="login-username" placeholder="è¯·è¾“å…¥ç”¨æˆ·å" required>
                        </div>
                        <div class="form-group">
                            <label>å¯†ç </label>
                            <input type="password" id="login-password" placeholder="è¯·è¾“å…¥å¯†ç " required>
                        </div>
                        <button type="submit" class="login-submit-btn">ç™»å½•</button>
                    </form>
                    
                    <form class="login-form" id="register-form" style="display: none;" onsubmit="loginUI.handleRegister(event)">
                        <div class="form-group">
                            <label>ç”¨æˆ·å</label>
                            <input type="text" id="register-username" placeholder="è¯·è¾“å…¥ç”¨æˆ·åï¼ˆ6-20ä½ï¼‰" required minlength="6" maxlength="20">
                        </div>
                        <div class="form-group">
                            <label>å¯†ç </label>
                            <input type="password" id="register-password" placeholder="è¯·è¾“å…¥å¯†ç ï¼ˆ6-20ä½ï¼‰" required minlength="6" maxlength="20">
                        </div>
                        <div class="form-group">
                            <label>ç¡®è®¤å¯†ç </label>
                            <input type="password" id="register-confirm" placeholder="è¯·å†æ¬¡è¾“å…¥å¯†ç " required>
                        </div>
                        <button type="submit" class="login-submit-btn">æ³¨å†Œ</button>
                    </form>
                </div>
                
                <div id="user-profile-section" style="display: none;">
                    <div class="user-profile">
                        <div class="profile-avatar">ğŸ‘¤</div>
                        <div class="profile-info">
                            <h3 id="profile-username">ç”¨æˆ·å</h3>
                            <p id="profile-joined">æ³¨å†Œæ—¶é—´ï¼š-</p>
                        </div>
                    </div>
                    <div class="profile-stats">
                        <div class="profile-stat">
                            <span class="stat-value" id="profile-study-days">0</span>
                            <span class="stat-label">å­¦ä¹ å¤©æ•°</span>
                        </div>
                        <div class="profile-stat">
                            <span class="stat-value" id="profile-total-time">0</span>
                            <span class="stat-label">å­¦ä¹ æ—¶é•¿(åˆ†)</span>
                        </div>
                    </div>
                    <div class="profile-actions">
                        <button class="profile-btn secondary" onclick="loginUI.switchAccount()">åˆ‡æ¢è´¦å·</button>
                        <button class="profile-btn danger" onclick="loginUI.logout()">é€€å‡ºç™»å½•</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="data.js?v=2"></script>
    <script src="econLawData.js?v=2"></script>
    <script src="coreDictionary.js?v=1"></script>
    <script src="vocabularyData.js?v=4"></script>
    <script src="noteAndRestore.js?v=2"></script>
    <script src="app.js?v=4"></script>
    <script src="aiDictation.js?v=1"></script>
    <script src="vocabGames.js?v=1"></script>
    <script src="smartVocabImport.js?v=1"></script>
    <script src="smartDictionary.js?v=1"></script>
    <script src="readingAssistant.js?v=2"></script>
    <script src="emailBackup.js?v=1"></script>
    <script src="heatMap.js?v=1"></script>
    <script src="econLawApp.js?v=2"></script>
    
    <!-- ç™»å½•åŠŸèƒ½æ¨¡å— -->
    <script>
    // ===== StudyX ç™»å½•ç³»ç»Ÿ =====
    const loginSystem = {
        // å½“å‰ç™»å½•ç”¨æˆ·
        currentUser: null,
        
        // ä» localStorage åŠ è½½ç™»å½•çŠ¶æ€
        init() {
            const saved = localStorage.getItem('studyx_current_user');
            if (saved) {
                this.currentUser = JSON.parse(saved);
                this.updateUI();
            }
        },
        
        // ç™»å½•
        login(username, password) {
            const users = this._getUsers();
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                this.currentUser = {
                    username: user.username,
                    joined: user.joined,
                    lastLogin: new Date().toISOString()
                };
                localStorage.setItem('studyx_current_user', JSON.stringify(this.currentUser));
                this.updateUI();
                return { success: true };
            }
            return { success: false, error: 'ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯' };
        },
        
        // æ³¨å†Œ
        register(username, password) {
            const users = this._getUsers();
            
            if (users.find(u => u.username === username)) {
                return { success: false, error: 'ç”¨æˆ·åå·²å­˜åœ¨' };
            }
            
            const newUser = {
                username,
                password,
                joined: new Date().toISOString()
            };
            
            users.push(newUser);
            localStorage.setItem('studyx_users', JSON.stringify(users));
            
            // è‡ªåŠ¨ç™»å½•
            return this.login(username, password);
        },
        
        // ç™»å‡º
        logout() {
            this.currentUser = null;
            localStorage.removeItem('studyx_current_user');
            this.updateUI();
        },
        
        // æ›´æ–°ç•Œé¢
        updateUI() {
            const userInfo = document.getElementById('user-info');
            const welcomeText = document.getElementById('welcome-text');
            const avatar = document.getElementById('user-avatar');
            
            if (this.currentUser) {
                welcomeText.textContent = `ä½ å¥½ï¼Œ${this.currentUser.username} ğŸ’ª`;
                avatar.textContent = 'ğŸ˜Š';
                if (userInfo) userInfo.classList.add('logged-in');
            } else {
                welcomeText.textContent = 'ä½ å¥½ï¼Œå¤‡è€ƒäºº ğŸ’ª';
                avatar.textContent = 'ğŸ‘¤';
                if (userInfo) userInfo.classList.remove('logged-in');
            }
        },
        
        // è·å–ç”¨æˆ·åˆ—è¡¨
        _getUsers() {
            const saved = localStorage.getItem('studyx_users');
            return saved ? JSON.parse(saved) : [];
        }
    };
    
    // ===== ç™»å½•ç•Œé¢äº¤äº’ =====
    const loginUI = {
        showModal() {
            const modal = document.getElementById('login-modal');
            if (modal) {
                modal.style.display = 'flex';
                this._updateProfileView();
            }
        },
        
        closeModal() {
            const modal = document.getElementById('login-modal');
            if (modal) {
                modal.style.display = 'none';
            }
        },
        
        switchTab(tab) {
            document.querySelectorAll('.login-tab').forEach(t => t.classList.remove('active'));
            document.querySelector(`.login-tab[data-tab="${tab}"]`).classList.add('active');
            
            if (tab === 'login') {
                document.getElementById('login-form').style.display = 'block';
                document.getElementById('register-form').style.display = 'none';
            } else {
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('register-form').style.display = 'block';
            }
        },
        
        handleLogin(event) {
            event.preventDefault();
            const username = document.getElementById('login-username').value.trim();
            const password = document.getElementById('login-password').value;
            
            const result = loginSystem.login(username, password);
            if (result.success) {
                this._showMessage('ç™»å½•æˆåŠŸï¼', 'success');
                this._updateProfileView();
            } else {
                this._showMessage(result.error, 'error');
            }
        },
        
        handleRegister(event) {
            event.preventDefault();
            const username = document.getElementById('register-username').value.trim();
            const password = document.getElementById('register-password').value;
            const confirm = document.getElementById('register-confirm').value;
            
            if (password !== confirm) {
                this._showMessage('ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´', 'error');
                return;
            }
            
            const result = loginSystem.register(username, password);
            if (result.success) {
                this._showMessage('æ³¨å†ŒæˆåŠŸï¼Œå·²è‡ªåŠ¨ç™»å½•ï¼', 'success');
                this._updateProfileView();
            } else {
                this._showMessage(result.error, 'error');
            }
        },
        
        logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ'))) {
                loginSystem.logout();
                this.switchTab('login');
                this._updateProfileView();
                this._showMessage('å·²é€€å‡ºç™»å½•', 'info');
            }
        },
        
        switchAccount() {
            loginSystem.logout();
            this.switchTab('login');
            this._updateProfileView();
        },
        
        _updateProfileView() {
            const isLoggedIn = !!loginSystem.currentUser;
            document.getElementById('login-form-section').style.display = isLoggedIn ? 'none' : 'block';
            document.getElementById('user-profile-section').style.display = isLoggedIn ? 'block' : 'none';
            
            if (isLoggedIn) {
                const user = loginSystem.currentUser;
                document.getElementById('profile-username').textContent = user.username;
                document.getElementById('profile-joined').textContent = `æ³¨å†Œæ—¶é—´ï¼š${new Date(user.joined).toLocaleDateString('zh-CN')}`;
                
                // ç»Ÿè®¡å­¦ä¹ æ•°æ®
                const reportCount = Object.keys(userData.dailyReports || {}).length;
                document.getElementById('profile-study-days').textContent = reportCount;
                document.getElementById('profile-total-time').textContent = userData.todayStudyTime || 0;
                
                // æ›´æ–°æ‰‹æœºç«¯æ˜¾ç¤º
                const mobileWelcome = document.getElementById('welcome-text-mobile');
                if (mobileWelcome) mobileWelcome.textContent = user.username;
            } else {
                // æœªç™»å½•çŠ¶æ€
                const mobileWelcome = document.getElementById('welcome-text-mobile');
                if (mobileWelcome) mobileWelcome.textContent = 'ç™»å½•/æ³¨å†Œ';
            }
        },
        
        _showMessage(message, type) {
            // ä½¿ç”¨åº”ç”¨çš„ toast æˆ– alert
            if (typeof app !== 'undefined' && app.showToast) {
                app.showToast(message);
            } else {
                alert(message);
            }
        }
    };
    
    // åˆå§‹åŒ–ç™»å½•ç³»ç»Ÿ
    document.addEventListener('DOMContentLoaded', () => {
        loginSystem.init();
        
        // éšè—éª¨æ¶å±
        setTimeout(() => {
            const skeleton = document.getElementById('skeleton-screen');
            if (skeleton) {
                skeleton.classList.add('hidden');
                setTimeout(() => skeleton.remove(), 300);
            }
        }, 500); // æœ€å°‘æ˜¾ç¤º500msï¼Œé¿å…é—ªçƒ
    });
    
    // å¯¼å‡ºåˆ°å…¨å±€
    window.loginSystem = loginSystem;
    window.loginUI = loginUI;
    </script>
    
    <!-- æµ‹è¯•å¤‡ä»½æ¨¡å—åŠ è½½ -->
    <script>
        console.log('[Init] é¡µé¢åŠ è½½å®Œæˆ');
        console.log('[Init] backupRestoreUI:', typeof window.backupRestoreUI);
        console.log('[Init] userData:', typeof userData);
        
        // ç¡®ä¿å¤‡ä»½æ¨¡å—åˆå§‹åŒ–
        if (window.backupRestoreUI) {
            console.log('[Init] åˆå§‹åŒ–å¤‡ä»½æ¨¡å—..');
            backupRestoreUI.init();
        } else {
            console.error('[Init] å¤‡ä»½æ¨¡å—æœªåŠ è½½ï¼');
        }
    </script>
    
    <!-- ç‰ˆæœ¬å·æ˜¾ç¤º-->
    <div class="app-version" style="position: fixed; bottom: 60px; right: 10px; font-size: 11px; color: var(--text-secondary); opacity: 0.6; z-index: 100;">v1.0.2</div>
</body>
</html>
